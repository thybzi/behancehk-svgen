<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>spinning line bg pattern generator</title>
    <script src="runtime.js"></script>
    <script src="spinning.js"></script>
    <style>
      h1 { margin: 0; font-size: 1.6em; }
      ol { line-height: 1.6em; }
      input[type=number] { width: 3em; }
      input:invalid { background-color: rgba(255, 0, 0, 0.2); }
    </style>
  </head>
  <body>
    <h1>spinning line bg pattern generator</h1>
    <form>
      <p>size:
        <input id="width" placeholder="canvas width (px)" title="canvas width (px)" value="1280" pattern="[0-9]+" required>
        <input id="height" placeholder="canvas height (px)" title="canvas height (px)" value="1280" pattern="[0-9]+" required>
      </p>
      <p>time:
        <input id="spin" placeholder="spin duration (ms)" title="spin duration (ms)" value="1000" pattern="[0-9]+" required>
        <input id="rest" placeholder="rest duration (ms)" title="rest duration (ms)" value="2000" pattern="[0-9]+" required>
      </p>
      <p>style:
        <input id="linecolor" type="color" title="line color" value="#0057ff" required>
        <input id="linewidth" type="number" title="line width" value="1" min="1" required>
      </p>
      <ol>
        <li>
          <input id="gap_1" placeholder="gap before (px)" title="gap before (px)" value="143" pattern="[0-9]+"/>
          <input id="length_1" placeholder="line length (px)" title="line length (px)" value="15" pattern="[0-9]+"/>
          <input id="delay_1" placeholder="anim delay (ms)" title="anim delay (ms)" value="1000" pattern="[0-9]+"/>
          <input id="count_1" placeholder="line count" title="line count" value="64" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_2" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_2" placeholder="line length (px)" title="line length (px)" value="20" pattern="[0-9]+"/>
          <input id="delay_2" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_2" placeholder="line count" title="line count" value="64" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_3" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_3" placeholder="line length (px)" title="line length (px)" value="10" pattern="[0-9]+"/>
          <input id="delay_3" placeholder="anim delay (ms)" title="anim delay (ms)" value="1500" pattern="[0-9]+"/>
          <input id="count_3" placeholder="line count" title="line count" value="64" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_4" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_4" placeholder="line length (px)" title="line length (px)" value="24" pattern="[0-9]+"/>
          <input id="delay_4" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_4" placeholder="line count" title="line count" value="64" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_5" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_5" placeholder="line length (px)" title="line length (px)" value="54" pattern="[0-9]+"/>
          <input id="delay_5" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_5" placeholder="line count" title="line count" value="128" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_6" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_6" placeholder="line length (px)" title="line length (px)" value="13" pattern="[0-9]+"/>
          <input id="delay_6" placeholder="anim delay (ms)" title="anim delay (ms)" value="2000" pattern="[0-9]+"/>
          <input id="count_6" placeholder="line count" title="line count" value="128" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_7" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_7" placeholder="line length (px)" title="line length (px)" value="26" pattern="[0-9]+"/>
          <input id="delay_7" placeholder="anim delay (ms)" title="anim delay (ms)" value="2500" pattern="[0-9]+"/>
          <input id="count_7" placeholder="line count" title="line count" value="128" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_8" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_8" placeholder="line length (px)" title="line length (px)" value="35" pattern="[0-9]+"/>
          <input id="delay_8" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_8" placeholder="line count" title="line count" value="128" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_9" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_9" placeholder="line length (px)" title="line length (px)" value="24" pattern="[0-9]+"/>
          <input id="delay_9" placeholder="anim delay (ms)" title="anim delay (ms)" value="3000" pattern="[0-9]+"/>
          <input id="count_9" placeholder="line count" title="line count" value="128" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_10" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_10" placeholder="line length (px)" title="line length (px)" value="44" pattern="[0-9]+"/>
          <input id="delay_10" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_10" placeholder="line count" title="line count" value="128" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_11" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_11" placeholder="line length (px)" title="line length (px)" value="46" pattern="[0-9]+"/>
          <input id="delay_11" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_11" placeholder="line count" title="line count" value="128" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_12" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_12" placeholder="line length (px)" title="line length (px)" value="27" pattern="[0-9]+"/>
          <input id="delay_12" placeholder="anim delay (ms)" title="anim delay (ms)" value="3500" pattern="[0-9]+"/>
          <input id="count_12" placeholder="line count" title="line count" value="256" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_13" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_13" placeholder="line length (px)" title="line length (px)" value="42" pattern="[0-9]+"/>
          <input id="delay_13" placeholder="anim delay (ms)" title="anim delay (ms)" value="4000" pattern="[0-9]+"/>
          <input id="count_13" placeholder="line count" title="line count" value="256" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_14" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_14" placeholder="line length (px)" title="line length (px)" value="30" pattern="[0-9]+"/>
          <input id="delay_14" placeholder="anim delay (ms)" title="anim delay (ms)" value="4500" pattern="[0-9]+"/>
          <input id="count_14" placeholder="line count" title="line count" value="256" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_15" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_15" placeholder="line length (px)" title="line length (px)" value="40" pattern="[0-9]+"/>
          <input id="delay_15" placeholder="anim delay (ms)" title="anim delay (ms)" value="5000" pattern="[0-9]+"/>
          <input id="count_15" placeholder="line count" title="line count" value="256" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_16" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_16" placeholder="line length (px)" title="line length (px)" value="47" pattern="[0-9]+"/>
          <input id="delay_16" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_16" placeholder="line count" title="line count" value="256" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_17" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_17" placeholder="line length (px)" title="line length (px)" value="300" pattern="[0-9]+"/>
          <input id="delay_17" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_17" placeholder="line count" title="line count" value="256" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_18" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_18" placeholder="line length (px)" title="line length (px)" pattern="[0-9]+"/>
          <input id="delay_18" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_18" placeholder="line count" title="line count" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_19" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_19" placeholder="line length (px)" title="line length (px)" pattern="[0-9]+"/>
          <input id="delay_19" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_19" placeholder="line count" title="line count" pattern="[0-9]+"/>
        </li>
        <li>
          <input id="gap_20" placeholder="gap before (px)" title="gap before (px)" pattern="[0-9]+"/>
          <input id="length_20" placeholder="line length (px)" title="line length (px)" pattern="[0-9]+"/>
          <input id="delay_20" placeholder="anim delay (ms)" title="anim delay (ms)" pattern="[0-9]+"/>
          <input id="count_20" placeholder="line count" title="line count" pattern="[0-9]+"/>
        </li>
      </ol>
      <button type="submit">generate pattern</button>
      <button type="reset">reset values</button>
      <script>
        document.scripts[document.scripts.length - 1].parentNode.onsubmit = function(event) {
          event.preventDefault();
          var spin = parseInt(document.getElementById('spin').value);
          var rest = parseInt(document.getElementById('rest').value);
          var total = spin + rest;
          var svgValues = {
            width: parseInt(document.getElementById('width').value),
            height: parseInt(document.getElementById('height').value),
            durationTotal: total,
            durationRatio: spin / total * 100,
            linecolor: document.getElementById('linecolor').value,
            linewidth: parseInt(document.getElementById('linewidth').value),
            lines: []
          }
          for (var i = 1; i <= 20; i++) {
            svgValues.lines.push({
              gap: parseInt(document.getElementById('gap_' + i).value) || null,
              length: parseInt(document.getElementById('length_' + i).value) || null,
              delay: parseInt(document.getElementById('delay_' + i).value) || null,
              count: parseInt(document.getElementById('count_' + i).value) || null
            });
          }
          var w = window.open('data:image/svg+xml;base64,' + btoa(template(svgValues)));
          w.focus();
        }
      </script>
    </form>
  </body>
</html>